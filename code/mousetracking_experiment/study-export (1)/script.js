// Define study
const study = lab.util.fromObject({
  "title": "root",
  "type": "lab.flow.Sequence",
  "parameters": {},
  "plugins": [
    {
      "type": "lab.plugins.Metadata",
      "path": undefined
    },
    {
      "type": "lab.plugins.PostMessage",
      "path": undefined
    }
  ],
  "metadata": {
    "title": "",
    "description": "",
    "repository": "",
    "contributors": ""
  },
  "files": {},
  "responses": {},
  "content": [
    {
      "type": "lab.html.Page",
      "items": [
        {
          "type": "text",
          "content": "\n\u003Cdiv class=\"content-horizontal-left\" align=\"left\"  id=\"logodiv\"\u003E\n\u003Cimg src=\"static\u002FAssetLogoBrightened.png\" style=\"width:400px;\" alt=\"Logo for the ASSET group at the University of Rhode Island\"\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv style=\"width:40vw;\"\u003E\n \u003Cp\u003EThank you for volunteering to participant in \"Comparing Layouts for Eye Gaze based PIN Entry\" by the ASSET group at The University of Rhode Island. \u003C\u002Fp\u003E\n\n \u003Cp\u003E Please read and review the informed consent form below. If you have any questions or concerns, please contact us before beginning the study. If you have fully read the form and agree to participate in the study, please click the \"yes\" button below. Thank you again for participating! \u003C\u002Fp\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cdiv style=\"height:30vh;width:40vw;  padding:0px; margin:0px; overflow-y:scroll;scrollbar-base-color:black, padding:5px;border:1px solid #FFFFFF;\"\u003E\n\u003CStrong\u003ESTUDY TITLE\u003C\u002FStrong\u003E \u003Cbr\u003E\nComparing Layouts for Eye Gaze based PIN Entry \u003Cbr\u003E\u003Cbr\u003E\n\u003CStrong\u003EPRINCIPAL INVESTIGATORS\u003C\u002FStrong\u003E\u003Cbr\u003E\nKrishna Kumar Venkatasubramanian, Ph.D. \u003Cbr\u003E\nOffice: (401) 874-2701 \u003Cbr\u003E\nEmail: krish@uri.edu \u003Cbr\u003E\n\u003CStrong\u003EKEY INFORMATION\u003C\u002FStrong\u003E\u003Cbr\u003E\nImportant information to know about this research study:\n\u003Cbr\u003E \u003Cbr\u003E\n•\tThe purpose of the study is to learn about which PIN entry layouts work well for eye gaze entry. \u003Cbr\u003E\n•\tIf you choose to participate, you will be asked to enter automatically generated four digit PINs in three different PIN layouts. This will take approximately one hour. \u003Cbr\u003E\n•\tRisks or discomforts from this research are expected to be minimal \u003Cbr\u003E\n•\tThe study will have no direct benefits to you \u003Cbr\u003E\n•\tYou will be paid $10 as a gift card for your participation \u003Cbr\u003E\n•\tYou will be provided a copy of this consent form. \u003Cbr\u003E\n•\tTaking part in this research project is voluntary. You don’t have to participate and you can stop it any time. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EINVITATION\u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nYou are invited to take part in this research study. The information in this form is meant to help you decide whether or not to participate. If you have any questions, please ask. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhy are you being asked to be in this research study? \u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nYou are being asked to be in this study because you are a person with an upper extremity impairment who regularly uses an eye gaze tracker. A person with UEI is anyone without full use or range of motion of their arms, shoulders, or hands. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat is the reason for doing this research study?\u003C\u002FStrong\u003E \u003Cbr\u003E\n\u003Cbr\u003E \nPIN entry has historically been designed for touch based interfaces. By looking specifically at ease of entry for eye gaze trackers we hope to build a better understanding of how to best build layouts for PIN entry for eye gaze trackers. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat will be done during this research study? \u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nDuring the study you will be provided with a 6 digit PIN that you will be given time to memorize. You will then be asked to enter the PIN on one of three different interfaces which will be selected at random. You will be asked to enter 15 PINs for each of three entry layouts. A video recording will be made of you entering PINs and metrics from the eye gaze tracker will be logged such as gaze points, gaze duration, and errors made. \u003Cbr\u003E\n\u003Cbr\u003E\nAfterward, you will be asked a few questions about your opinions on the interfaces as well as a few demographics questions such as age, gender, and disability. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EHow will my video and audio recordings be used?\u003C\u002FStrong\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\nYour video recordings will be used as part of a security evaluation for the PIN entry in which study participants will be able to view the PIN entry and attempt to copy the PIN that you have entered during the study. This will allow us to evaluate whether or not the PIN entry is robust to shoulder surfing attacks. Your demographic information will not be included in these recordings. Facial features such as your eyes may be necessary to test the fidelity of the system to shoulder surfing attacks from various angles, and therefore will not be blurred in the recording. You can still participate if you do not want your video recordings to be part of the security evaluation. \u003Cbr\u003E\n\u003Cbr\u003E\nAt the conclusion of the study we will ask you questions about your experience. Those answers will be audio recorded. The audio recordings will then be transcribed and the audio will be deleted after the transcription is made and verified to be accurate. You can still participate if you do not want to be recorded. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat are the possible risks of being in this research study?\u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nThere are no known risks to you from being in this research study.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat are the possible benefits to you?\u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nYou are not expected to get any benefit from being in this study.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat are the possible benefits to other people?\u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nWe hope that this work will results in better understanding of how to design PIN entry methods for eye gaze tracker users.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat will being in this research study cost you? \u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nThere is no cost to you to be in this research study.\t\u003Cbr\u003E\n\t\u003Cbr\u003E\n\u003CStrong\u003EWill you be compensated for being in this research study? \u003C\u002FStrong\u003E \u003Cbr\u003E\n\u003Cbr\u003E\nYou will receive a $10 gift card for participating in this study\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat should you do if you have a problem during this research study?\u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nYour welfare is the major concern of every member of the research team. If you have a problem as a direct result of being in this study, you should immediately contact one of the people listed at the beginning of this consent form. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EHow will information about you be protected? \u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nReasonable steps will be taken to protect your privacy and the confidentiality of your study data.\u003Cbr\u003E\n\u003Cbr\u003E\nThe data will be stored electronically through a secure server and will only be seen by the research team during the study and for 5 years or longer after the study is complete. \u003Cbr\u003E\n\u003Cbr\u003E\nThe only persons who will have access to your research records are the study personnel, the Institutional Review Board (IRB), and any other person, agency, or sponsor as required by law. The information from this study may be published in scientific journals or presented at scientific meetings but the data will be reported as group or summarized data and your identity will be kept strictly confidential.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat are your rights as a research subject? \u003C\u002FStrong\u003E\u003Cbr\u003E\n\u003Cbr\u003E\nYou may ask any questions concerning this research and have those questions answered before agreeing to participate in or during the study.\u003Cbr\u003E\n\u003Cbr\u003E\nFor study related questions, please contact the investigator(s) listed at the beginning of this form.\u003Cbr\u003E\n\u003Cbr\u003E\nFor questions concerning your rights or complaints about the research contact the Institutional Review Board (IRB) or Vice President for Research and Economic Development:  \u003Cbr\u003E\n\u003Cbr\u003E\n•\tIRB: (401) 874-4328 \u002F researchintegrity@etal.uri.edu. \u003Cbr\u003E\n•\tVice President for Research and Economic Development: at (401) 874-4576\u003Cbr\u003E\n\u003Cbr\u003E\n\u003CStrong\u003EWhat will happen if you decide not to be in this research study or decide to stop participating once you start? \u003C\u002FStrong\u003E \u003Cbr\u003E\n\u003Cbr\u003E\nYou can decide not to be in this research study, or you can stop being in this research study (“withdraw’) at any time before, during, or after the research begins for any reason. Deciding not to be in this research study or deciding to withdraw will not affect your relationship with the investigator or with the University of Rhode Island (list others as applicable). \u003Cbr\u003E\n\u003Cbr\u003E\nYou will not lose any benefits to which you are entitled.\u003Cbr\u003E\n\u003Cbr\u003E\nDocumentation of informed consent \u003Cbr\u003E\n\u003Cbr\u003E\nYou are voluntarily making a decision whether or not to be in this research study. Signing this form means that (1) you have read and understood this consent form, (2) you have had the consent form explained to you, (3) you have had your questions answered and (4) you have decided to be in the research study. You will be given a copy of this consent form to keep. \u003Cbr\u003E\n\u003Cbr\u003E\n\u003C\u002Fdiv\u003E\n\u003Cbr\u003E\n\u003Cdiv\u003E\n\u003CStrong \u003EDo you agree to participate in this study\u003C\u002FStrong\u003E \u003Cbr\u003E\n\u003Cbutton id=\"yesconsent\" style=\"background-color:black;color:yellow\"\u003EYes\u003C\u002Fbutton\u003E\n\u003Cbutton id=\"noconsent\" style=\"background-color:black;color:yellow\" onClick=\"self.close()\"\u003ENo\u003C\u002Fbutton\u003E\n\u003C\u002Fdiv\u003E"
        }
      ],
      "scrollTop": true,
      "submitButtonText": "Continue →",
      "submitButtonPosition": "hidden",
      "files": {},
      "responses": {},
      "parameters": {},
      "messageHandlers": {},
      "title": "Intro"
    },
    {
      "type": "lab.html.Page",
      "items": [
        {
          "required": true,
          "type": "html",
          "content": "\u003C!DOCTYPE html\u003E\n\u003Chtml lang=\"en\"\u003E\n\u003Cmain class=\"content-horizontal-center content-vertical-top\"\u003E\n    \u003Cdiv class=\"w-l text-left\" style=\"text-align: center;\" id=\"maindiv\"\u003E\n        \u003Ch3 class=\"text-center\"\u003E\n            \u003Cp\u003EBefore the experiment begins, please verify your participation by entering in the text box the Participation ID Number you were provided with.\u003C\u002Fp\u003E\n            \n            \u003Cp\u003E Also please remember to turn on turn on mouse emulation mode or the equivalent mode for your eye gaze tracker before beginning this study. \u003C\u002Fp\u003E\n        \u003C\u002Fh3\u003E\n\n        \u003Cscript src=\"verify.js\"\u003E\u003C\u002Fscript\u003E\n        \u003Cinput name= \"ID\" style= \"text-align: center;background-color:black;color:yellow\" type=\"text\" id=\"myText\"\u003E\n        \u003Cp id=\"demo\"\u003E\u003C\u002Fp\u003E\n        \n    \u003C\u002Fdiv\u003E\n\u003C\u002Fmain\u003E\n\u003C\u002Fhtml\u003E",
          "name": ""
        }
      ],
      "scrollTop": true,
      "submitButtonText": "Continue →",
      "submitButtonPosition": "hidden",
      "files": {},
      "responses": {},
      "parameters": {},
      "messageHandlers": {
        "run": function anonymous(
) {
console.log("Instantiating Verification");

maindiv = document.getElementById("maindiv")
var btn = document.createElement("BUTTON");
btn.style.background = "black";
btn.style.color = "yellow";
btn.innerHTML = "Verify"; 
maindiv.appendChild(btn);

var participationIDs = [1006, 1087, 1249, 1298, 1338, 1530, 1542, 1559, 1581, 1584, 1627, 1634, 1650, 1695, 1696, 1719, 1720, 1770, 1809, 1847, 1877, 2033, 2047, 2065, 2112, 2165, 2343, 2360, 2431, 2516, 2559, 2580, 2636, 2649, 2762, 2782, 2813, 2847, 2875, 2896, 2937, 2959, 3063, 3119, 3156, 3207, 3209, 3339, 3343, 3347, 3394, 3446, 3448, 3463, 3466, 3566, 3615, 3651, 3669, 3759, 3853, 3867, 3980, 4003, 4030, 4113, 4220, 4342, 4357, 4463, 4496, 4508, 4551, 4645, 4716, 4732, 4772, 4809, 4816, 4829, 4850, 4856, 4908, 4909, 4961, 5067, 5101, 5178, 5184, 5204, 5211, 5214, 5217, 5219, 5305, 5320, 5413, 5491, 5553, 5597, 5669, 5729, 5770, 5784, 5820, 5838, 5841, 5881, 5918, 5961, 5967, 6113, 6134, 6165, 6180, 6186, 6223, 6378, 6396, 6492, 6573, 6619, 6676, 6707, 6711, 6728, 6905, 6929, 6955, 6974, 7074, 7083, 7098, 7099, 7106, 7113, 7147, 7153, 7155, 7157, 7232, 7262, 7270, 7281, 7347, 7399, 7409, 7433, 7481, 7597, 7610, 7620, 7701, 7846, 7852, 7941, 8050, 8238, 8244, 8266, 8287, 8346, 8438, 8470, 8496, 8505, 8598, 8678, 8681, 8758, 8772, 8819, 8896, 8901, 8918, 8952, 8965, 9018, 9059, 9095, 9144, 9147, 9176, 9181, 9192, 9207, 9214, 9281, 9324, 9349, 9352, 9372, 9505, 9546, 9568, 9692, 9759, 9767, 9850, 9914, 0001];

function myFunction() {
  // take textbox input in as JS variable
  var text = document.getElementById("myText").value;
  
  // for testing in console
  console.log(text);
  
  // loop through list of PINs
  for(var i = 0; i < 201; i++) {
    
    // match found
    if(text == participationIDs[i]) {
      console.log("Found Match");
      return true;
    }
  }
  
  document.getElementById("demo").innerHTML = "ID Number Not Found";

  // keeps user on "Verify" Page
  return false;
}

console.log('Myfunction: ',myFunction)

btn.onclick = myFunction
}
      },
      "title": "Page"
    },
    {
      "type": "lab.flow.Sequence",
      "files": {},
      "responses": {},
      "parameters": {},
      "messageHandlers": {},
      "title": "Randomize",
      "shuffle": true,
      "content": [
        {
          "type": "lab.html.Page",
          "items": [
            {
              "required": true,
              "type": "html",
              "content": "\u003C!DOCTYPE html\u003E\r\n\u003Chtml lang=\"en\"\u003E\r\n\u003Chead\u003E\r\n    \u003Cmeta charset=\"UTF-8\"\u003E\r\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003E\r\n    \u003Ctitle\u003EDocument\u003C\u002Ftitle\u003E\r\n    \u003Clink href=\"pin-login\u002Fpin-login.css\" rel=\"stylesheet\"\u003E\r\n\u003C\u002Fhead\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv class=\"display_box\"\u003E\r\n        \u003Cdiv class=\"pin-login\" id=\"mainPinLogin\"\u003E\r\n        \u003Cinput type=\"password\" readonly class=\"pin-login__text\"\u003E\r\n        \u003Cdiv class=\"pin-login__numpad\"\u003E\r\n            \r\n        \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \r\n    \u003Cscript src=\"pin-login\u002Fpin-login.js\"\u003E\u003C\u002Fscript\u003E\r\n    \u003Cscript\u003E\r\n        console.log(\"In script\")\r\n        new PinLogin({\r\n            el: document.getElementById(\"mainPinLogin\"), \r\n            pageinfo: \"first\",\r\n            maxNumbers: 4\r\n        });\r\n        \r\n    \u003C\u002Fscript\u003E\r\n\u003C\u002Fbody\u003E\r\n\u003Cfooter class=\"content-horizontal-right\" style=\"background-color:black\"\u003E\r\n  \u003Cbutton id=\"continue\" style=\"background-color:black;color:yellow\"\u003EContinue &rarr;\u003C\u002Fbutton\u003E\r\n\u003C\u002Ffooter\u003E\r\n\u003C\u002Fhtml\u003E",
              "name": ""
            }
          ],
          "scrollTop": true,
          "submitButtonText": "Continue →",
          "submitButtonPosition": "hidden",
          "files": {
            "Figure_3.png": "embedded\u002F21422e2c93bc18bf86dbdc8758fcf7218650be9ab0fe53d5b1bc44a11967a895.png",
            "13-2-sunglasses-high-quality-png-thumb.png": "embedded\u002Fa4936a80c9ba774e989e1b57cfc1dafd91600d7526fac2abe333921019939f14.png"
          },
          "responses": {
            "keypress(Space)": "Continue"
          },
          "parameters": {},
          "messageHandlers": {
            "run": function anonymous(
) {
class PinLogin {
  
    constructor ({el, pageinfo, maxNumbers, ds = Infinity}) {
        window.resizeTo(screen.width, screen.height);
        console.log("made Pin Login")
        this.el = {
            main: el,
            numPad: el.querySelector(".pin-login__numpad"),
            textDisplay: el.querySelector(".pin-login__text")
        };
        

        this.con = document.getElementById('continue');
        this.con.style="display:none"
        this.password = this._randPass();
        this.retimes = 1;

        this.newDiv1 = document.createElement("div");
        this.newContent = document.createTextNode("Your PIN: ".concat(this.password.toString())); 
        this.pageinfo = pageinfo;
        this.maxNumbers = maxNumbers;
        this.value = "";
        this.ds = ds;
        this.times = new Date(); //use this to get current time
        this.sstime = this.times.getTime(); //records the start time of a pin
       //all string variables are the ones saved to the final csv
        this.attemptpin = ''; //digits entered for a pin attempt 
        this.attempttime = ''; //time of an attempt
        this.pincorrect = ''; //num of correct pins
        this.attempts = 0; //int num of attempts
        this.numattempts = ''; //num of attempts for a specific pin
        this.timeforkeypress = ''; //time for individual key presses
        this.timeforcorrectpin = ''; //time it takes for a correct attempt
        this.numbackspace = ''; //num of backspace per attempt
        this.backspace = 0; //int num of backspace for counting purposes
        this.numincorrect = 0; //int num of incorret pin attempts
        this.incorrect = ''; //num of incorrect pin attempts
        this.totalerror = ''; //total num of errors for a pin

        this.oldTime = this.sstime;
        this.oldKeyTime = this.sstime;
        this.oldcorrectTime = this.sstime;

        if (pageinfo == "first"){
            this._generatePad1()
        }else if (pageinfo == "second"){
            this._generatePad2()
        }else if (pageinfo == "third"){
            this._generatePad3()
        }
        
    }

   _generatePad1() { //keypad of screen one
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"00", "0",
            "_","[","[", "Del"
        ];
        this.el.numPad.style.width = "300px";
        this.el.numPad.style.height = "475px";
        this.el.numPad.style.marginLeft = "20px";
        this.el.numPad.style.marginRight = "20px";
        console.log("window size is : ");
        console.log(window.innerWidth);
        console.log(window.innerWidth); 
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        padLayout.forEach(key => {
            const insertBreak = key.search(/[369_]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "00" || keyEl.textContent == "_" || keyEl.textContent == "["){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }

            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createWe()
    }

    _generatePad2(){ //screen of pad 2
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"0","b","_","_","_","Del"
        ];


        this.el.numPad.style.marginLeft = "25px";
        padLayout.forEach(key => {
            const insertBreak = key.search(/[5]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "b" || keyEl.textContent == "_"){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }
            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createDiv();
    }

    _generatePad3(){ //pad 3
        const padLayout = [
            "0","1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            
        ];
        
        const coord = [["853px","853px"],["629px","982px"],["371px","982px"],["147px","853px"],["18px","371px"],["18px","629px"],["147px","147px"],["371px","18px"],["629px","18px"],["853px","147px"]]
        
        var i = 0;
        padLayout.forEach(key => {
            
            
            console.log(i);
            console.log(coord[i][1]);
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            keyEl.style.cssText = "position:fixed; color: red";
            keyEl.style.left = coord[i][0];
            keyEl.style.top =  coord[i][1];
            i = i + 1;
        });

    }

    _createWe(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        var newDiv = document.createElement("div"); 

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "700px";
        newDiv.style.width = "1000px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.style.top = (sh - 350).toString().concat("px");
        newDiv.style.left = (sw - 500).toString().concat("px");


        var innerDiv1 = document.createElement("div");

        innerDiv1.style.height = "300px";
        innerDiv1.style.width = "450px";
        innerDiv1.style.background = "black";
        innerDiv1.style.border = 'white';
        innerDiv1.style.textAlign = "center";
        innerDiv1.style.float = "left";

        var innerDiv2 = document.createElement("div");

        innerDiv2.style.height = "500px";
        innerDiv2.style.width = "450px";
        innerDiv2.style.background = "black";
        innerDiv2.style.border = 'white';
        innerDiv2.style.textAlign = "center";
        innerDiv2.style.float = "left";

        newDiv.appendChild(innerDiv1);
        newDiv.appendChild(innerDiv2);



        var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        button6.style.height = "80px";
        button6.style.width = "110px";
        var _this = this;
        button6.addEventListener("click", function(){
          _this._createDiv();
            newDiv.style = "display:none";
        });



        var newContent = document.createTextNode("You will be asked to enter 8, 4-digit PINs on each keypad layout. This layout will be a 3x3 layout like the picture shown to the right. During PIN entry you can use the 'Del' button to delete the last digit entered. Press 'Continue' when you are ready to enter your first PIN");
        innerDiv1.style.margin = "20px"
        innerDiv2.style.margin = "20px"
        innerDiv1.style.marginLeft = "30px";
        innerDiv2.style.marginTop = "40px"
        innerDiv1.style.marginTop = "100px";
        innerDiv1.style.fontSize = "30px";
       
        var img = document.createElement('img'); 
            img.src =  'static/vertical.png'; 

        img.style.width = "300px";
        innerDiv1.appendChild(newContent);
        innerDiv2.appendChild(img);
        newDiv.appendChild(button6);

        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

 
    }

    _createDiv(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2
        
        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        // and give it some content 
        var newDiv1 = document.createElement("div");
        var newContent = document.createTextNode("Your new PIN is: "); 
        newDiv1.style.width = "400px";
        newDiv1.style.height = "40px";
        newDiv1.style.marginTop = "20px";
        newDiv1.style.textAlign = "center";

        var newDiv2 = document.createElement("div");
        var newPassword = document.createTextNode(this.password.toString()); 
        newDiv2.style.width = "400px";
        newDiv2.style.height = "40px";
        newDiv2.style.fontSize = "40px";
        newDiv2.style.textAlign = "center";

        var newDiv3 = document.createElement("div");
        var newContent2 = document.createTextNode("press OK when ready to enter the PIN"); 
        newDiv3.style.width = "400px";
        newDiv3.style.height = "40px";
        newDiv3.style.marginTop = "30px";
        newDiv3.style.textAlign = "center";
        
        var newDiv4 = document.createElement("div");
        var newContent3 = document.createTextNode((8 - this.retimes).toString().concat(" left")); 
        newDiv4.style.width = "400px";
        newDiv4.style.height = "40px";
        newDiv4.style.marginTop = "30px";
        newDiv4.style.textAlign = "center";

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.appendChild(newDiv1);
        newDiv.appendChild(newDiv2);
        newDiv.appendChild(newDiv3);
        newDiv.appendChild(newDiv4);
        // add the text node to the newly created div
        newDiv1.appendChild(newContent);  
        newDiv2.appendChild(newPassword);
        newDiv3.appendChild(newContent2);
        newDiv4.appendChild(newContent3);
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");

        var button = document.createElement("button");
        button.innerHTML = "ok";
        button.style.fontSize = "20px";
        button.style.height = "60px";
        button.style.width = "60px";
        button.style.background = "black";
        button.style.color = "yellow";
        newDiv.appendChild(button);
        var _this = this;
        // 3. Add event handler
        button.addEventListener ("click", function() {
            newDiv.style = "display:none";
            _this.el.textDisplay.classList.remove("pin-login__text--green")
        });

        
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

        this.newContent.textContent = "Your PIN: ".concat(this.password.toString())
        this.newContent.fontSize = "80px";
        this.newDiv1.style.width = "300px";
        this.newDiv1.style.fontSize = "40px";
        this.newDiv1.style.height = "40px";
        this.newDiv1.style.marginLeft = "-340px";
        this.newDiv1.style.marginTop = "-550px";
        this.newDiv1.style.textAlign = "center";
        this.newDiv1.style.background = "black";
        this.newDiv1.appendChild(this.newContent);
        this.el.numPad.appendChild(this.newDiv1);
        //
        
      
    }

    _createDiv2(){
        var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        button6.style.height = "80px";
        button6.style.width = "210px";
        var _this = this;
        var continueButton = document.getElementById("continue");
        button6.addEventListener("click", function(){
            newDiv.style = "display:none";
            continueButton.click();
        });


        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        
        // and give it some content 
        var newContent = document.createTextNode("You have now entered: 8 correct PINs. You can now move on to the next PIN pad. Click Continue when you are ready to move on");
        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.fontSize = "30px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";
        newDiv.style.background = "black";
        // add the text node to the newly created div
        newDiv.appendChild(newContent);  
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");
        newDiv.appendChild(button6);
        // 3. Add event handler
        this.con.addEventListener ("click", function() {
            newDiv.style = "display:none";
        });
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 
    }

    _handleKeyPress(key){
      //when a key is pressed, this records the key pressed and gets the time
      //of the press. Backspaces are also recorded here
      this.time = new Date();
      this.timeforkeypress = this.timeforkeypress + (this.time.getTime()-this.oldKeyTime) + ',';
      this.ds.set('timeforkeypress',[this.timeforkeypress]);
        if (key == "Del"){
          console.log(key);
          this.backspace = this.backspace + 1;
          this.value = this.value.substring(0, this.value.length - 1);
          this._updateValueText();
        }else if (this.value.length < this.maxNumbers && !isNaN(key)){
            this.value += key;
        }
       
        this._updateValueText();
        this.oldKeyTime = this.time.getTime();
        
        
       
    }

    _updateValueText(){
        this.el.textDisplay.value = this.value;
        this.el.textDisplay.classList.remove("pin-login__text--error")
        if (this.value.length == this.maxNumbers){
            this._attemptLogin()
        }
    }

    _attemptLogin(){
      this._recordMetrics(); //records all metrics of an individual pin attempt
      //this attempt maybe correct or incorrect

        if (this.value == this.password && this.retimes == 8){ //correct attempt and user has done all the pins for a screen
            console.log("you got in!")
            this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect}); 
            this.el.textDisplay.classList.add("pin-login__text--green")
            this._createDiv2()
            this.retimes = 1;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.attempts = 0;
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
            this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.numincorrect = 0;
            this.ds.set('totalerror',[this.totalerror]);

        }else if (this.value == this.password){ //correct pin attempt and there are still pins left to do in the screen
           this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.retimes += 1
            this.el.textDisplay.classList.add("pin-login__text--green")
            console.log("you got in!")
            this._createDiv()
            this.value = this.value.substring(0, this.value.length - this.maxNumbers)
            this.el.textDisplay.value = this.value;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.attempts = 0;
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
             this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.ds.set('totalerror',[this.totalerror]);
            this.oldcorrectTime = this.time.getTime();
            this.numincorrect = 0;
        }else{ //incorrect pin attempt
            console.log("incorrect pin attempt")
            this.pincorrect = this.pincorrect + 'no,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.el.textDisplay.classList.add("pin-login__text--error")
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.numincorrect = this.numincorrect + 1;
         
        }
    }

    _recordMetrics(){ //record all metrics for an individual pin attempt
      this.time = new Date();
     
      this.attemptpin = this.attemptpin + this.value + ',';
      this.attempttime = this.attempttime + (this.time.getTime()-this.oldTime) + ',';
     this.oldTime = this.time.getTime();
        this.ds.set('pintyped', [this.attemptpin]);
        this.ds.set('attempttime', [this.attempttime]);
        this.ds.get('pintyped');
        this.attempts = this.attempts + 1;
        this.numbackspace = this.numbackspace + this.backspace + ',';
        this.ds.set('numbackspace',[this.numbackspace]);
    }

    _randPass(){
        var passward = "";
        var i;
        for (i = 0; i < this.maxNumbers; i++) {
        passward = passward.concat(parseInt(Math.random()*10).toString());
        }
        return passward;
    }

}

console.log("Instantiate")
new PinLogin({
  el: document.getElementById("mainPinLogin"), 
  pageinfo: "first", //tells what pinpad will load
  maxNumbers: 4, //length of pin
  ds: this.options.datastore
});
console.log("after")




}
          },
          "title": "Index",
          "plugins": [
            {
              "type": "mousetrap",
              "mode": "mousetrap",
              "path": "global.MousetrapPlugin"
            }
          ]
        },
        {
          "type": "lab.html.Page",
          "items": [
            {
              "required": true,
              "type": "html",
              "content": "\u003C!DOCTYPE html\u003E\r\n\u003Chtml lang=\"en\"\u003E\r\n\u003Chead\u003E\r\n    \u003Cmeta charset=\"UTF-8\"\u003E\r\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003E\r\n    \u003Ctitle\u003EDocument\u003C\u002Ftitle\u003E\r\n    \u003Clink href=\"pin-login\u002Fpin-login.css\" rel=\"stylesheet\"\u003E\r\n\u003C\u002Fhead\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv class=\"display_box\"\u003E\r\n        \u003Cdiv class=\"pin-login\" id=\"mainPinLogin\"\u003E\r\n        \u003Cinput type=\"password\" readonly class=\"pin-login__text\"\u003E\r\n        \u003Cdiv class=\"pin-login__numpad\"\u003E\r\n            \r\n        \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \r\n    \u003Cscript src=\"pin-login\u002Fpin-login.js\"\u003E\u003C\u002Fscript\u003E\r\n    \u003Cscript\u003E\r\n        console.log(\"In script\")\r\n        new PinLogin({\r\n            el: document.getElementById(\"mainPinLogin\"), \r\n            pageinfo: \"second\",\r\n            maxNumbers: 4\r\n        });\r\n    \u003C\u002Fscript\u003E\r\n\u003C\u002Fbody\u003E\r\n\u003Cfooter class=\"content-horizontal-right\" style=\"background-color:black\"\u003E\r\n  \u003Cbutton id=\"continue\" style=\"background-color:black;color:yellow\"\u003EContinue &rarr;\u003C\u002Fbutton\u003E\r\n\u003C\u002Ffooter\u003E\r\n\u003C\u002Fhtml\u003E",
              "name": ""
            }
          ],
          "scrollTop": true,
          "submitButtonText": "Continue →",
          "submitButtonPosition": "hidden",
          "files": {
            "screen_one.html": "embedded\u002F80bb8e754a13237cdc9c993d6adadd11087c644a19a91de2b5ed184c0b08ab66.html"
          },
          "responses": {
            "click button": "continue"
          },
          "parameters": {},
          "messageHandlers": {
            "run": function anonymous(
) {
class PinLogin {
    constructor ({el, pageinfo, maxNumbers, ds = Infinity}) {
        console.log("made Pin Login")
        this.el = {
            main: el,
            numPad: el.querySelector(".pin-login__numpad"),
            textDisplay: el.querySelector(".pin-login__text")
        };
        window.resizeTo(screen.width, screen.height);
        

        this.con = document.getElementById('continue');
        this.con.style="display:none";
        this.password = this._randPass();
        this.retimes = 1;

        this.newDiv1 = document.createElement("div");
        this.newContent = document.createTextNode("Your PIN: ".concat(this.password.toString())); 
        this.pageinfo = pageinfo;
        this.maxNumbers = maxNumbers;
        this.value = "";
        this.ds = ds;
        this.times = new Date(); //use this to get current time
        this.sstime = this.times.getTime(); //records the start time of a pin
       //all string variables are the ones saved to the final csv
        this.attemptpin = ''; //digits entered for a pin attempt 
        this.attempttime = ''; //time of an attempt
        this.pincorrect = ''; //num of correct pins
        this.attempts = 0; //int num of attempts
        this.numattempts = ''; //num of attempts for a specific pin
        this.timeforkeypress = ''; //time for individual key presses
        this.timeforcorrectpin = ''; //time it takes for a correct attempt
        this.numbackspace = ''; //num of backspace per attempt
        this.backspace = 0; //int num of backspace for counting purposes
        this.numincorrect = 0; //int num of incorret pin attempts
        this.incorrect = ''; //num of incorrect pin attempts
        this.totalerror = ''; //total num of errors for a pin

        this.oldTime = this.sstime;
        this.oldKeyTime = this.sstime;
        this.oldcorrectTime = this.sstime;

        if (pageinfo == "first"){
            this._generatePad1()
        }else if (pageinfo == "second"){
            this._generatePad2()
        }else if (pageinfo == "third"){
            this._generatePad3()
        }

        
    }

   _generatePad1() { //keypad of screen one
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"00", "0",
            "_","[","[", "Del"
        ];

        
        padLayout.forEach(key => {
            const insertBreak = key.search(/[369_]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "00" || keyEl.textContent == "_" || keyEl.textContent == "["){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }

            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createWe();
    }

    _generatePad2(){ //screen of pad 2
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"0","b","_","_","_","Del"
        ];
        this.el.numPad.style.width = "500px";
        this.el.numPad.style.height = "275px";
        this.el.numPad.style.marginLeft = "25px";
        this.el.numPad.style.marginRight = "25px";
        padLayout.forEach(key => {
            const insertBreak = key.search(/[5]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "b" || keyEl.textContent == "_"){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }
            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createWe();
    }

    _generatePad3(){ //pad 3
        const padLayout = [
            "0","1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            
        ];
        
        const coord = [["853px","853px"],["629px","982px"],["371px","982px"],["147px","853px"],["18px","371px"],["18px","629px"],["147px","147px"],["371px","18px"],["629px","18px"],["853px","147px"]]
        
        var i = 0;
        padLayout.forEach(key => {
            
            
            console.log(i);
            console.log(coord[i][1]);
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            keyEl.style.cssText = "position:fixed; color: red";
            keyEl.style.left = coord[i][0];
            keyEl.style.top =  coord[i][1];
            i = i + 1;
        });

    }

    _createWe(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        var newDiv = document.createElement("div"); 

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "700px";
        newDiv.style.width = "1000px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.style.top = (sh - 350).toString().concat("px");
        newDiv.style.left = (sw - 500).toString().concat("px");


        var innerDiv1 = document.createElement("div");

        innerDiv1.style.height = "300px";
        innerDiv1.style.width = "450px";
        innerDiv1.style.background = "black";
        innerDiv1.style.textAlign = "center";
        innerDiv1.style.float = "left";

        var innerDiv2 = document.createElement("div");

        innerDiv2.style.height = "400px";
        innerDiv2.style.width = "450px";
        innerDiv2.style.background = "black";
        innerDiv2.style.textAlign = "center";
        innerDiv2.style.float = "left";

        newDiv.appendChild(innerDiv1);
        newDiv.appendChild(innerDiv2);



        var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.height = "80px";
        button6.style.width = "110px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        var _this = this;
        button6.addEventListener("click", function(){
          _this._createDiv();
            newDiv.style = "display:none";
        });



        var newContent = document.createTextNode(" You will be asked to submit 8, 4-digit PINs on keypad layouts. This layout will be a 2x5 layout like the picture show to the right. During PIN entry you can use the 'Del' button to delete the last digit entered. Press 'Continue' when you are ready to enter your first PIN");
        innerDiv1.style.margin = "20px"
        innerDiv2.style.margin = "20px"
        innerDiv2.style.marginTop = "100px"
        innerDiv1.style.marginTop = "100px";
        innerDiv1.style.fontSize = "30px";

       
        var img = document.createElement('img'); 
            img.src =  'static/horizontal.png'; 

        img.style.width = "400px";
        innerDiv1.appendChild(newContent)
        innerDiv2.appendChild(img) 
        newDiv.appendChild(button6);

        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

 
    }

    _createDiv(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2
        
        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        // and give it some content 
        var newDiv1 = document.createElement("div");
        var newContent = document.createTextNode("Your new PIN is: "); 
        newDiv1.style.width = "400px";
        newDiv1.style.height = "40px";
        newDiv1.style.marginTop = "20px";
        newDiv1.style.textAlign = "center";

        var newDiv2 = document.createElement("div");
        var newPassword = document.createTextNode(this.password.toString()); 
        newDiv2.style.width = "400px";
        newDiv2.style.height = "40px";
        newDiv2.style.fontSize = "40px";
        newDiv2.style.textAlign = "center";

        var newDiv3 = document.createElement("div");
        var newContent2 = document.createTextNode("press OK when ready to enter the PIN"); 
        newDiv3.style.width = "400px";
        newDiv3.style.height = "40px";
        newDiv3.style.marginTop = "30px";
        newDiv3.style.textAlign = "center";
        newDiv3.style.background = "black";
        newDiv3.style.color = "yellow";
        
        var newDiv4 = document.createElement("div");
        var newContent3 = document.createTextNode((8 - this.retimes).toString().concat(" left")); 
        newDiv4.style.width = "400px";
        newDiv4.style.height = "40px";
        newDiv4.style.marginTop = "30px";
        newDiv4.style.textAlign = "center";

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.appendChild(newDiv1);
        newDiv.appendChild(newDiv2);
        newDiv.appendChild(newDiv3);
        newDiv.appendChild(newDiv4);
        // add the text node to the newly created div
        newDiv1.appendChild(newContent);  
        newDiv2.appendChild(newPassword);
        newDiv3.appendChild(newContent2);
        newDiv4.appendChild(newContent3);
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");

        var button = document.createElement("button");
        button.innerHTML = "ok";
        button.style.fontSize = "20px";
        button.style.height = "60px";
        button.style.width = "60px";
        button.style.background = "black";
        button.style.color = "yellow";
        newDiv.appendChild(button);
        var _this = this;
        // 3. Add event handler
        button.addEventListener ("click", function() {
            newDiv.style = "display:none";
            _this.el.textDisplay.classList.remove("pin-login__text--green")
        });
        
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

        this.newContent.textContent = "Your PIN: ".concat(this.password.toString())
        this.newContent.fontSize = "80px";
        this.newDiv1.style.width = "300px";
        this.newDiv1.style.height = "40px";
        this.newDiv1.style.fontSize = "40px";
        this.newDiv1.style.marginLeft = "-340px";
        this.newDiv1.style.marginTop = "-370px";
        this.newDiv1.style.textAlign = "center";
        this.newDiv1.style.background = "black";
        this.newDiv1.appendChild(this.newContent);
        this.el.numPad.appendChild(this.newDiv1);
      
    }

    _createDiv2(){
        var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        button6.style.height = "80px";
        button6.style.width = "210px";
        var _this = this;
        var continueButton = document.getElementById("continue");
        button6.addEventListener("click", function(){
            newDiv.style = "display:none";
            continueButton.click();
        });
        
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        // and give it some content 
        var newContent = document.createTextNode("You have now entered: 8 correct PINs. You can now move on to the next PIN pad. Click Continue when you are ready to move on"); 
        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.fontSize = "30px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";
        newDiv.style.background = "black";
        newDiv.style.background = "black";
        // add the text node to the newly created div
        newDiv.appendChild(newContent);  
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");
        newDiv.appendChild(button6);

        // 3. Add event handler
        this.con.addEventListener ("click", function() {
            newDiv.style = "display:none";
        });
        
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 
    }

    _handleKeyPress(key){
      //when a key is pressed, this records the key pressed and gets the time
      //of the press. Backspaces are also recorded here
      this.time = new Date();
      this.timeforkeypress = this.timeforkeypress + (this.time.getTime()-this.oldKeyTime) + ',';
      this.ds.set('timeforkeypress',[this.timeforkeypress]);
        if (key == "Del"){
          console.log(key);
          this.backspace = this.backspace + 1;
          this.value = this.value.substring(0, this.value.length - 1);
          this._updateValueText();
        }else if (this.value.length < this.maxNumbers && !isNaN(key)){
            this.value += key;
        }
       
        this._updateValueText();
        this.oldKeyTime = this.time.getTime();
        
        
       
    }

    _updateValueText(){
        this.el.textDisplay.value = this.value;
        this.el.textDisplay.classList.remove("pin-login__text--error")
        if (this.value.length == this.maxNumbers){
            this._attemptLogin()
        }
    }

    _attemptLogin(){
      this._recordMetrics(); //records all metrics of an individual pin attempt
      //this attempt maybe correct or incorrect

        if (this.value == this.password && this.retimes == 8){ //correct attempt and user has done all the pins for a screen
            console.log("you got in!")
            this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect}); 
            this.el.textDisplay.classList.add("pin-login__text--green")
            this._createDiv2()
            this.retimes = 1;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.attempts = 0;
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
            this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.ds.set('totalerror',[this.totalerror]);
            this.numincorrect = 0;

        }else if (this.value == this.password){ //correct pin attempt and there are still pins left to do in the screen
           this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.retimes += 1
            console.log("you got in!")
            this.el.textDisplay.classList.add("pin-login__text--green")
            this._createDiv()
            this.value = this.value.substring(0, this.value.length - this.maxNumbers)
            this.el.textDisplay.value = this.value;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.attempts = 0;
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
             this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.ds.set('totalerror',[this.totalerror]);
            this.oldcorrectTime = this.time.getTime();
            this.numincorrect = 0;
        }else{ //incorrect pin attempt
            console.log("get out of here")
        this.pincorrect = this.pincorrect + 'no,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.el.textDisplay.classList.add("pin-login__text--error")
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.numincorrect = this.numincorrect + 1;
         
        }
    }

    _recordMetrics(){ //record all metrics for an individual pin attempt
      this.time = new Date();
     
      this.attemptpin = this.attemptpin + this.value + ',';
      this.attempttime = this.attempttime + (this.time.getTime()-this.oldTime) + ',';
     this.oldTime = this.time.getTime();
        this.ds.set('pintyped', [this.attemptpin]);
        this.ds.set('attempttime', [this.attempttime]);
        this.ds.get('pintyped');
        this.attempts = this.attempts + 1;
        this.numbackspace = this.numbackspace + this.backspace + ',';
        this.ds.set('numbackspace',[this.numbackspace]);
    }

    _randPass(){
        var passward = "";
        var i;
        for (i = 0; i < this.maxNumbers; i++) {
        passward = passward.concat(parseInt(Math.random()*10).toString());
        }
        return passward;
    }

}

console.log("Instantiate")
new PinLogin({
  el: document.getElementById("mainPinLogin"), 
  pageinfo: "second", //tells what pinpad will load
  maxNumbers: 4, //length of pin
  ds: this.options.datastore
});
console.log("after")




}
          },
          "title": "screen_one.html",
          "plugins": [
            {
              "type": "mousetrap",
              "mode": "mousetrap",
              "path": "global.MousetrapPlugin"
            }
          ]
        },
        {
          "type": "lab.html.Page",
          "items": [
            {
              "required": true,
              "type": "html",
              "content": "\u003C!DOCTYPE html\u003E\r\n\u003Chtml lang=\"en\"\u003E\r\n\u003Chead\u003E\r\n    \u003Cmeta charset=\"UTF-8\"\u003E\r\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003E\r\n    \u003Ctitle\u003EDocument\u003C\u002Ftitle\u003E\r\n    \u003Clink href=\"pin-login\u002Fpin-login.css\" rel=\"stylesheet\"\u003E\r\n\u003C\u002Fhead\u003E\r\n\u003Cbody\u003E\r\n    \u003Cdiv class=\"display_box\"\u003E\r\n        \u003Cdiv class=\"pin-login\" id=\"mainPinLogin\"\u003E\r\n        \u003Cinput type=\"password\" readonly class=\"pin-login__text\"\u003E\r\n        \u003Cdiv class=\"pin-login__numpad\"\u003E\r\n            \r\n        \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \u003C\u002Fdiv\u003E\r\n    \r\n   \r\n\u003C\u002Fbody\u003E\r\n\u003Cfooter class=\"content-horizontal-right\" style=\"background-color:black\"\u003E\r\n  \u003Cbutton id=\"continue\" style=\"background-color:black;color:yellow\"\u003EContinue &rarr;\u003C\u002Fbutton\u003E\r\n\u003C\u002Ffooter\u003E\r\n\u003C\u002Fhtml\u003E",
              "name": ""
            }
          ],
          "scrollTop": true,
          "submitButtonText": "Continue →",
          "submitButtonPosition": "hidden",
          "files": {
            "screen_one.html": "embedded\u002F80bb8e754a13237cdc9c993d6adadd11087c644a19a91de2b5ed184c0b08ab66.html"
          },
          "responses": {
            "click button": "continue"
          },
          "parameters": {},
          "title": "screen_two.html",
          "plugins": [
            {
              "type": "mousetrap",
              "mode": "mousetrap",
              "path": "global.MousetrapPlugin"
            }
          ],
          "messageHandlers": {
            "run": function anonymous(
) {
class PinLogin {
    constructor ({el, pageinfo, maxNumbers, ds = Infinity}) {
        console.log("made Pin Login")
        this.el = {
            main: el,
            numPad: el.querySelector(".pin-login__numpad"),
            textDisplay: el.querySelector(".pin-login__text")
        };
        //window.resizeTo(screen.width, screen.height);

        this.con = document.getElementById('continue');
        this.con.style="display:none"
        this.password = this._randPass();
        this.retimes = 1;

        this.newDiv1 = document.createElement("div");
        this.newContent = document.createTextNode("Your PIN: ".concat(this.password.toString())); 
        this.pageinfo = pageinfo;
        this.maxNumbers = maxNumbers;
        this.value = "";
        this.ds = ds;
       this.times = new Date();
        this.sstime = this.times.getTime();
       
        this.attemptpin = '';
        this.attempttime = '';
        this.pincorrect = '';
        this.attempts = 0;
        this.numattempts = '';
        this.timeforkeypress = '';
        this.timeforcorrectpin = '';
        this.numbackspace = '';
        this.backspace = 0;
        this.numincorrect = 0;
        this.incorrect = '';
        this.totalerror = '';

        this.oldTime = this.sstime;
        this.oldKeyTime = this.sstime;
        this.oldcorrectTime = this.sstime;
        if (pageinfo == "first"){
            this._generatePad1()
        }else if (pageinfo == "second"){
            this._generatePad2()
        }else if (pageinfo == "third"){
            this._generatePad3()
        }
        
    }

   _generatePad1() {
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"00", "0",
            "_","[","[", "Del"
        ];

        padLayout.forEach(key => {
            const insertBreak = key.search(/[369_]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "00" || keyEl.textContent == "_" || keyEl.textContent == "["){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }

            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createWe();
    }

    _generatePad2(){
        const padLayout = [
            "1", "2", "3",
            "4", "5", "6",
            "7", "8", "9",
            ,"0","b","_","_","_","Del"
        ];
        this.el.numPad.style.marginLeft = "25px";
        padLayout.forEach(key => {
            const insertBreak = key.search(/[5]/) !== -1;
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);
            if (keyEl.textContent == "b" || keyEl.textContent == "_"){
                this.el.numPad.appendChild(keyEl)
                keyEl.style.visibility = "hidden"
            }
            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createDiv();
    }

    _generatePad3(){
        const padLayout = [
            "0","1", "2", "3",
            "4", "5", "6",
            "8", "7", "9","Del"
        ];
        this.el.numPad.style.width = "600px";
        this.el.numPad.style.height = "600px";
        const filler = ["_","_","_","_","b",
                        "_","_","_","_","b",
                        "_","_","_","_","b",
                        "_","_","_","_","b",
                        "_","_","_","_","b"];

        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)*.659
        const buttonSize = 110

          const coordf = [[420,520],
        [420,180],
        [320, 100],
        [190, 100],
        [80,180],
        [10,290],
        [10, 410],
        [190,600],
        [80,520],
        [320,600],
        [500,620]];
        var i = 0;
        padLayout.forEach(key => {
            
            console.log(i);
            const keyEl = document.createElement("div");

            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            this.el.numPad.appendChild(keyEl);
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            keyEl.style.cssText = "position:absolute;";
            var va = getPos(keyEl);
            keyEl.style.left = (Number(coordf[i][0])-50).toString().concat("px");
            keyEl.style.top =  (Number(coordf[i][1])-20).toString().concat("px");
           
            console.log((Number(coordf[i][0])-30).toString().concat("psx"));
            console.log((Number(coordf[i][1])).toString().concat("psx"));
            var va = getPos(keyEl);
            console.log(((va.x).toString().concat("pssx")));
            console.log(((va.y).toString().concat("pssx")));
            //console.log(x,y);
            i = i + 1;
            });
            

        filler.forEach(key => {
            const insertBreak = key.search(/[b]/) !== -1;
            const keyEl = document.createElement("div");
            keyEl.style.visibility = "hidden"
            keyEl.classList.add("pin-login__key");
            keyEl.classList.toggle("material-icons", isNaN(key));
            keyEl.textContent = key;
            keyEl.addEventListener("click", () => { this._handleKeyPress(key) });
            this.el.numPad.appendChild(keyEl);

            if (insertBreak) {
                this.el.numPad.appendChild(document.createElement("br"));
            }
        });
        this._createWe();

     }

    _createDiv(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2
        
        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        // and give it some content 
        var newDiv1 = document.createElement("div");
        var newContent = document.createTextNode("Your new PIN is: "); 
        newDiv1.style.width = "400px";
        newDiv1.style.height = "40px";
        newDiv1.style.marginTop = "20px";
        newDiv1.style.textAlign = "center";

        var newDiv2 = document.createElement("div");
        var newPassword = document.createTextNode(this.password.toString()); 
        newDiv2.style.width = "400px";
        newDiv2.style.height = "40px";
        newDiv2.style.fontSize = "40px";
        newDiv2.style.textAlign = "center";

        var newDiv3 = document.createElement("div");
        var newContent2 = document.createTextNode("press ok when ready to enter the PIN"); 
        newDiv3.style.width = "400px";
        newDiv3.style.height = "40px";
        newDiv3.style.marginTop = "30px";
        newDiv3.style.textAlign = "center";
        
        var newDiv4 = document.createElement("div");
        var newContent3 = document.createTextNode((8 - this.retimes).toString().concat(" left")); 
        newDiv4.style.width = "400px";
        newDiv4.style.height = "40px";
        newDiv4.style.marginTop = "30px";
        newDiv4.style.textAlign = "center";

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.appendChild(newDiv1);
        newDiv.appendChild(newDiv2);
        newDiv.appendChild(newDiv3);
        newDiv.appendChild(newDiv4);
        // add the text node to the newly created div
        newDiv1.appendChild(newContent);  
        newDiv2.appendChild(newPassword);
        newDiv3.appendChild(newContent2);
        newDiv4.appendChild(newContent3);
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");

        var button = document.createElement("button");
        button.innerHTML = "ok";
        button.style.fontSize = "20px";
        button.style.height = "60px";
        button.style.width = "60px";
        button.style.background = "black";
        button.style.color = "yellow";
        newDiv.appendChild(button);

        var _this = this;
        // 3. Add event handler
        button.addEventListener ("click", function() {
            newDiv.style = "display:none";
            _this.el.textDisplay.classList.remove("pin-login__text--green")
        });
        
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

        this.newContent.textContent = "Your PIN: ".concat(this.password.toString())
        this.newContent.fontSize = "50px";
        this.newDiv1.style.width = "340px";
        this.newDiv1.style.fontSize = "40px";
        this.newDiv1.style.height = "0px";
        this.newDiv1.style.marginLeft = "-330px";
        this.newDiv1.style.marginTop = "-560px";
        this.newDiv1.style.textAlign = "center";
        this.newDiv1.style.background = "black";
        this.newDiv1.appendChild(this.newContent);
        this.el.numPad.appendChild(this.newDiv1);
      
    }

    _createWe(){
        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        var newDiv = document.createElement("div"); 

        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "700px";
        newDiv.style.width = "1000px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";

        newDiv.style.top = (sh - 350).toString().concat("px");
        newDiv.style.left = (sw - 500).toString().concat("px");


        var innerDiv1 = document.createElement("div");

        innerDiv1.style.height = "300px";
        innerDiv1.style.width = "450px";
        innerDiv1.style.background = "black";
        innerDiv1.style.textAlign = "center";
        innerDiv1.style.float = "left";

        var innerDiv2 = document.createElement("div");

        innerDiv2.style.height = "500px";
        innerDiv2.style.width = "450px";
        innerDiv2.style.background = "black";
        innerDiv2.style.textAlign = "center";
        innerDiv2.style.float = "left";

        newDiv.appendChild(innerDiv1);
        newDiv.appendChild(innerDiv2);



        var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.height = "80px";
        button6.style.width = "110px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        var _this = this;
        button6.addEventListener("click", function(){
          _this._createDiv();
            newDiv.style = "display:none";
        });



        var newContent = document.createTextNode("You will be asked to submit 8, 4-digit PINs on keypad layouts. This next layout will be a rotary dial layout like the picture show to the right. During PIN entry you can use the 'Del' button to delete the last digit entered. Press 'Continue' when you are ready to enter your first PIN.");
        innerDiv1.style.margin = "20px"
        innerDiv2.style.margin = "20px"
        innerDiv2.style.marginTop = "40px"
        innerDiv1.style.marginTop = "100px";
        innerDiv1.style.fontSize = "30px";
        

       
        var img = document.createElement('img'); 
            img.src =  'static/rotary.png'; 

        img.style.width = "400px";
        innerDiv1.appendChild(newContent)
        innerDiv2.appendChild(img) 
        newDiv.appendChild(button6);

        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 

 
    }

    _createDiv2(){
         var button6 = document.createElement("button");
        button6.innerHTML = "Continue";
        button6.style.fontSize = "20px";
        button6.style.background = "black";
        button6.style.color = "yellow";
        button6.style.height = "80px";
        button6.style.width = "210px";
        var _this = this;
        var continueButton = document.getElementById("continue");
        button6.addEventListener("click", function(){
            newDiv.style = "display:none";
            continueButton.click();
        });

        const sw = Number(window.innerWidth)/2
        const sh = Number(window.innerHeight)/2

        this.password = this._randPass();
        // create a new div element 
        var newDiv = document.createElement("div"); 
        newDiv.style.cssText = "position:absolute; border:1px solid blue";
        // and give it some content 
        var newContent = document.createTextNode("You have now entered: 8 correct PINs. You can now move on to the next PIN pad. Click Continue when you are ready to move on"); 
        newDiv.style.cssText = "position:absolute; border:1px solid white";
        newDiv.style.height = "370px";
        newDiv.style.width = "400px";
        newDiv.style.fontSize = "30px";
        newDiv.style.background = "black";
        newDiv.style.textAlign = "center";
        newDiv.style.background = "black";
        // add the text node to the newly created div
        newDiv.appendChild(newContent);  
        newDiv.style.top = (sh-200).toString().concat("px");
        newDiv.style.left = (sw-200).toString().concat("px");
        newDiv.appendChild(button6);

        // 3. Add event handler
        this.con.addEventListener ("click", function() {
            newDiv.style = "display:none";
        });
        
        // add the newly created element and its content into the DOM 
        var currentDiv = document.getElementById("div1"); 
        document.body.insertBefore(newDiv, currentDiv); 
    }

    

 
_handleKeyPress(key){
      this.time = new Date();
      this.timeforkeypress = this.timeforkeypress + (this.time.getTime()-this.oldKeyTime) + ',';
      this.ds.set('timeforkeypress',[this.timeforkeypress]);
        if (key == "Del"){
          console.log(key);
          this.backspace = this.backspace + 1;
          this.value = this.value.substring(0, this.value.length - 1);
          this._updateValueText();
        }else if (this.value.length < this.maxNumbers && !isNaN(key)){
            this.value += key;
        }
       
        this._updateValueText();
        this.oldKeyTime = this.time.getTime();
        
        
       
    }

    _updateValueText(){
        this.el.textDisplay.value = this.value;
        this.el.textDisplay.classList.remove("pin-login__text--error")
        if (this.value.length == this.maxNumbers){
            this._attemptLogin()
        }
    }

    _attemptLogin(){
      this._recordMetrics();

        if (this.value == this.password && this.retimes == 8){
            console.log("you got in!")
            this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.el.textDisplay.classList.add("pin-login__text--green")
            this._createDiv2()
            this.retimes = 1;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.attempts = 0;
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
            this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.ds.set('totalerror',[this.totalerror]);
            this.numincorrect = 0;

        }else if (this.value == this.password){
           this.pincorrect = this.pincorrect + 'yes,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.retimes += 1
            console.log("you got in!")
            this.el.textDisplay.classList.add("pin-login__text--green")
            this._createDiv()
            this.value = this.value.substring(0, this.value.length - this.maxNumbers)
            this.el.textDisplay.value = this.value;
            this.numattempts = this.numattempts + this.attempts + ',';
            this.ds.set('numattempts',[this.numattempts]);
            this.timeforcorrectpin = this.timeforcorrectpin + (this.time.getTime() -this.oldcorrectTime) + ',';
            this.ds.set('timeforcorrectpin',[this.timeforcorrectpin]);
            this.attempts = 0;
            this.incorrect = this.incorrect + this.numincorrect + ',';
            this.ds.set('numincorrect',[this.incorrect]);
             this.totalerror = this.totalerror + (this.numincorrect + this.backspace) + ',';
            this.ds.set('totalerror',[this.totalerror]);
            this.oldcorrectTime = this.time.getTime();
            this.numincorrect = 0;
        }else{
            console.log("get out of here")
        this.pincorrect = this.pincorrect + 'no,';
            this.ds.set({'pincorrect':this.pincorrect});
            this.el.textDisplay.classList.add("pin-login__text--error")
            this.value = this.value.substring(0, this.value.length - this.maxNumbers);
            this.el.textDisplay.value = this.value;
            this.numincorrect = this.numincorrect + 1;
         
        }
    }

    _recordMetrics(){
      this.time = new Date();
     
      this.attemptpin = this.attemptpin + this.value + ',';
      this.attempttime = this.attempttime + (this.time.getTime()-this.oldTime) + ',';
     this.oldTime = this.time.getTime();
        this.ds.set('pintyped', [this.attemptpin]);
        this.ds.set('attempttime', [this.attempttime]);
        this.ds.get('pintyped');
        this.attempts = this.attempts + 1;
        this.numbackspace = this.numbackspace + this.backspace + ',';
        this.ds.set('numbackspace',[this.numbackspace]);
    }

    _randPass(){
        var passward = "";
        var i;
        for (i = 0; i < this.maxNumbers; i++) {
        passward = passward.concat(parseInt(Math.random()*10).toString());
        }
        return passward;
    }

}
function getPos(el) {
    // yay readability
    for (var lx=0, ly=0;
         el != null;
         lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent);
    return {x: lx,y: ly};
}

console.log("Instantiate")
new PinLogin({
  el: document.getElementById("mainPinLogin"), 
  pageinfo: "third",
  maxNumbers: 4,
  ds: this.options.datastore
});
console.log("after")




}
          }
        }
      ]
    }
  ]
})

// Let's go!
study.run()